<div class="container">
    <div class="header">
        <h2>View Lean Session</h2>
        <div class="header-actions">
            <button class="btn-secondary" (click)="onBack()">Back to List</button>
            <button class="btn-primary" (click)="onEdit()" *ngIf="session">Edit</button>
            <button class="btn-warning" (click)="onClose()" *ngIf="session && session.status !== 3">Close Session</button>
        </div>
    </div>

    <!-- Loading indicator -->
    <div *ngIf="isLoading" class="loading-indicator">
        <p>Loading session details...</p>
    </div>

    <!-- Error message -->
    <div *ngIf="errorMessage && !isLoading" class="error-message">
        <p>{{ errorMessage }}</p>
    </div>

    <!-- Session Details -->
    <div *ngIf="session && !isLoading" class="session-details">
        <div class="detail-card">
            <div class="card-header">
                <h3>{{ session.title || 'Untitled Session' }}</h3>
                <span class="status-badge" [ngClass]="getStatusBadgeClass(session.status)">
                    {{ getStatusText(session.status) }}
                </span>
            </div>

            <div class="card-body">
                <div class="detail-section">
                    <h4>Description</h4>
                    <p class="description">{{ session.description || 'No description provided' }}</p>
                </div>

                <div class="detail-grid">
                    <div class="detail-item">
                        <span class="detail-label">Default Topic Duration:</span>
                        <span class="detail-value">{{ session.defaultTopicDuration || 7 }} minutes</span>
                    </div>

                    <div class="detail-item">
                        <span class="detail-label">Visibility:</span>
                        <span class="detail-value">{{ session.isPublic ? 'Public' : 'Private' }}</span>
                    </div>

                    <div class="detail-item" *ngIf="session.scheduledStartTime">
                        <span class="detail-label">Scheduled Start:</span>
                        <span class="detail-value">{{ session.scheduledStartTime | date:'medium' }}</span>
                    </div>

                    <div class="detail-item" *ngIf="session.actualStartTime">
                        <span class="detail-label">Actual Start:</span>
                        <span class="detail-value">{{ session.actualStartTime | date:'medium' }}</span>
                    </div>

                    <div class="detail-item" *ngIf="session.actualEndTime">
                        <span class="detail-label">Actual End:</span>
                        <span class="detail-value">{{ session.actualEndTime | date:'medium' }}</span>
                    </div>

                    <div class="detail-item" *ngIf="session.inviteCode">
                        <span class="detail-label">Invite Code:</span>
                        <span class="detail-value">{{ session.inviteCode }}</span>
                    </div>
                </div>

                <div class="metadata-section">
                    <h4>Session Metadata</h4>
                    <div class="detail-grid">
                        <div class="detail-item">
                            <span class="detail-label">Created At:</span>
                            <span class="detail-value">{{ session.createdAt ? (session.createdAt | date:'medium') : 'N/A' }}</span>
                        </div>

                        <div class="detail-item">
                            <span class="detail-label">Created By:</span>
                            <span class="detail-value">{{ session.createdBy || 'N/A' }}</span>
                        </div>

                        <div class="detail-item" *ngIf="session.updatedAt">
                            <span class="detail-label">Updated At:</span>
                            <span class="detail-value">{{ session.updatedAt | date:'medium' }}</span>
                        </div>

                        <div class="detail-item" *ngIf="session.updatedBy">
                            <span class="detail-label">Updated By:</span>
                            <span class="detail-value">{{ session.updatedBy }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
