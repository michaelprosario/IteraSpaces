<div class="container">
    <div class="header">
        <h2>Lean Sessions</h2>
        <div class="header-actions">
            <div class="search-section">
                <input 
                    type="text" 
                    class="search-input" 
                    placeholder="Search sessions by title"
                    [(ngModel)]="searchTerm"
                    (keyup.enter)="onSearch()">
                <button class="btn-search" (click)="onSearch()">Search</button>
            </div>
            <button class="btn-primary" (click)="onAddSession()">Add Session</button>
        </div>
    </div>

    <!-- Loading indicator -->
    <div *ngIf="isLoading" class="loading-indicator">
        <p>Loading sessions...</p>
    </div>

    <!-- Error message -->
    <div *ngIf="errorMessage && !isLoading" class="error-message">
        <p>{{ errorMessage }}</p>
    </div>

    <!-- Results summary -->
    <div *ngIf="!isLoading && !errorMessage" class="results-summary">
        <p>Showing {{ sessions.length }} of {{ totalCount }} sessions (Page {{ currentPage }} of {{ totalPages }})</p>
    </div>

    <div *ngIf="!isLoading && !errorMessage" class="table-container">
        <table>
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Description</th>
                    <th>Status</th>
                    <th>Scheduled Start</th>
                    <th>Created</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let session of sessions">
                    <td class="session-title">
                        <span>{{ session.title || 'Untitled' }}</span>
                    </td>
                    <td class="session-description">{{ session.description || '-' }}</td>
                    <td>
                        <span class="status-badge" [ngClass]="getStatusBadgeClass(session.status)">
                            {{ getStatusText(session.status) }}
                        </span>
                    </td>
                    <td class="scheduled-time">{{ formatDate(session.scheduledStartTime) }}</td>
                    <td class="created-at">{{ formatDate(session.createdAt) }}</td>
                    <td class="actions">
                        <button class="btn-view" (click)="onViewSession(session.id)">View</button>
                        <button class="btn-edit" (click)="onEditSession(session.id)">Edit</button>
                    </td>
                </tr>
                <tr *ngIf="sessions.length === 0">
                    <td colspan="6" class="no-results">No sessions found</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Pagination -->
    <div *ngIf="!isLoading && !errorMessage && totalPages > 1" class="pagination">
        <button 
            class="pagination-btn" 
            (click)="previousPage()" 
            [disabled]="currentPage === 1">
            Previous
        </button>
        
        <button 
            *ngIf="currentPage > 3 && totalPages > 5"
            class="pagination-btn"
            (click)="onPageChange(1)">
            1
        </button>
        
        <span *ngIf="currentPage > 3 && totalPages > 5" class="pagination-ellipsis">...</span>
        
        <button 
            *ngFor="let page of getPageNumbers()"
            class="pagination-btn"
            [class.active]="page === currentPage"
            (click)="onPageChange(page)">
            {{ page }}
        </button>
        
        <span *ngIf="currentPage < totalPages - 2 && totalPages > 5" class="pagination-ellipsis">...</span>
        
        <button 
            *ngIf="currentPage < totalPages - 2 && totalPages > 5"
            class="pagination-btn"
            (click)="onPageChange(totalPages)">
            {{ totalPages }}
        </button>
        
        <button 
            class="pagination-btn" 
            (click)="nextPage()" 
            [disabled]="currentPage === totalPages">
            Next
        </button>
    </div>
</div>
